$(".received_distress_list").hide();
$(".received_others_list").hide();
$(".transmitted_calls_list").hide();
$(".home_screen").hide();
$(".message").show();
$(".message").html('<%= j render 'show' %>');
$(".link:visible").eq(0).focus();

$(".link, .input").on("keydown", function(e){
  var index       =   null;
  var selector    =   ".link, .input";
  if ( e.keyCode == 38 || e.keyCode == 37 ){
      index   =   $(selector).index(this);
      if (index > 0){
          $(selector).eq(index-1).focus();
      }
      return;
  }
  if ( e.keyCode == 40  || e.keyCode == 39){
      index   =   $(selector).index(this);
      if (index < $(selector).length - 1 ){
          $(selector).eq(index+1).focus();
      }
      return;
  }
});

$("#close_4_1").click(function(){
  $(".message").hide();
  $(".received_distress_list").show();
  $(".link:visible").eq(0).focus();
  from_mmsi = $(".link:visible").eq(0).data("mmsi");
  $(".from_or_to_mmsi").text(from_mmsi);
});
$("#close_4_1").keypress(function(e){
  if(e.which == 13){
    $("#close_4_1").click();
  }
});

$("#close_4_2").click(function(){
  $(".message").hide();
  $(".received_others_list").show();
  $(".link:visible").eq(0).focus();
  from_mmsi = $(".link:visible").eq(0).data("mmsi");
  $(".from_or_to_mmsi").text(from_mmsi);
});
$("#close_4_2").keypress(function(e){
  if(e.which == 13){
    $("#close_4_2").click();
  }
});

$("#close_4_3").click(function(){
  $(".message").hide();
  $(".transmitted_calls_list").show();
  $(".link:visible").eq(0).focus();
  to_mmsi = $(".link:visible").eq(0).data("mmsi");
  $(".from_or_to_mmsi").text(to_mmsi);
});
$("#close_4_3").keypress(function(e){
  if(e.which == 13){
    $("#close_4_3").click();
  }
});

$("#ack_4_1").click(function(){
  $("#distress_ack").show();
  $(".link:visible").eq(0).focus();
});
$("#ack_4_1").keypress(function(e){
  if(e.which == 13){
    $("#ack_4_1").click();
  }
});

$("#relay_4_1").click(function(){
  $("#distress_relay").show();
  $(".link:visible").eq(0).focus();
});
$("#relay_4_1").keypress(function(e){
  if(e.which == 13){
    $("#relay_4_1").click();
  }
});

dsc_id = <%= @dsc.id %>
$("#dist_ack_continue").click(function(){
  $.post(`/dscs/${dsc_id}/ack`);
});
$("#dist_ack_continue").keypress(function(e){
  if(e.which == 13){
    $("#dist_ack_continue").click();
  }
});

$("#dist_relay_continue").click(function(){
  $(".home_screen").hide();
  $(".sub_screen").hide();
  $(".menu_screen").show();
  $(".main_menu").hide();
  $(".menu_class").hide();
  $(".distress_relay_call").html('<%= j render 'distress_relay_call' %>');
  $(".distress_relay_call").show();
  $("#ok_relay").show();
  $("#call_relay").hide();
  $(":input").prop("readonly", false);
  $("#input_relay_1").val('');
  $(".link:visible").eq(0).focus();
});

$(".new_ch_call").click(function(){
  $(".home_screen").hide();
  $(".sub_screen").hide();
  $(".menu_screen").show();
  $(".main_menu").hide();
  $(".menu_class").hide();
  $(".new_ch").html('<%= j render 'new_ch' %>');
  $(".new_ch").show();
  $("#ok_new").show();
  $("#call_new").hide();
  $(":input").prop("readonly", false);
  $("#input_new_1").val('');
  $(".link:visible").eq(3).focus();
});

$(".new_ch_call").keypress(function(e){
  if(e.which == 13){
    $(".new_ch_call").click();
  }
});

$(".nack_call").click(function(){
  $(".home_screen").hide();
  $(".sub_screen").hide();
  $(".menu_screen").show();
  $(".main_menu").hide();
  $(".menu_class").hide();
  $(".unable_reason_selection").html('<%= j render 'unable_reason_selection' %>');
  $(".unable_reason_selection").show();
  $(".link:visible").eq(0).focus();
});

$(".nack_call").keypress(function(e){
  if(e.which == 13){
    $(".nack_call").click();
  }
});


$("#dist_relay_continue").keypress(function(e){
  if(e.which == 13){
    $("#dist_relay_continue").click();
  }
});

$("#dist_ack_cancel").click(function(){
  $("#distress_ack").hide();
  $(".link:visible").eq(0).focus();
});
$("#dist_ack_cancel").keypress(function(e){
  if(e.which == 13){
    $("#dist_ack_cancel").click();
  }
});

$("#dist_relay_cancel").click(function(){
  $("#distress_relay").hide();
  $(".link:visible").eq(0).focus();
});
$("#dist_relay_cancel").keypress(function(e){
  if(e.which == 13){
    $("#dist_relay_cancel").click();
  }
});
