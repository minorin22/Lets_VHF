<% case @station.state %>
<% when 4 %>
  $(".home_screen").hide();
  $(".menu_screen").show();
  $(".main_menu").hide();
  $(".menu_class").hide();
  $(".safety_call").hide();
  $(".safety_call_specific_station").html('<%= j render 'safety_call_specific_station' %>');
  $(".safety_call_specific_station").show();
  $(".hide_li").hide();
  $("#ok_2_1_2").show();
  $("#call_2_1_2").hide();
  $(":input").prop("readonly", false);
  $("#input_2_1_2_1").val('');
  $(".link:visible").eq(0).focus();

  var message_types = ["All modes RT", "Position RQ", "Test"];
  var message_type = $("#input_2_1_2_2").val();
  if (message_type == message_types[0]){
    var i = 0;
  } else if (message_type == message_types[1]){
    i = 1;
  } else if (message_type == message_types[2]){
    i = 2;
  }
  $("#type_2_1_2").click(function(){
    if (i == 0 || i == 1){
      i += 1;
      $("#input_2_1_2_3").val("");
      $("#work_ch_2_1_2").hide();
    } else if (i == 2){
      i = 0;
      $("#input_2_1_2_3").val("16");
      $("#work_ch_2_1_2").show();
    }
    $("#input_2_1_2_2").val(message_types[i]);
  });


  $("#ok_2_1_2").click(function(){
    $("#ok_2_1_2").hide();
    $(".hide_li").show();
    $("#call_2_1_2").show();
    $(":input").prop("readonly", true);
    $("#call_2_1_2").focus();
  });

  $("#cancel_2_1_2").click(function(){
    $("#ok_2_1_2").show();
    $("#call_2_1_2").hide();
    $(":input").prop("readonly", false);
    $("#ok_2_1_2").focus();

  });

  $("form").submit(function(){
    var self = this;
    $(":submit", self).prop("disabled", true);
    setTimeout(function(){
      $(":submit", self).prop("disabled", false);
    }, 10000);
  });

  $(".link, .input").on("keydown", function(e){

    var index       =   null;
    var selector    =   ".link, .input";

    //  ↑キー
    if ( e.keyCode == 38 || e.keyCode == 37 ){
        index   =   $(selector).index(this);
        if (index > 0){
            $(selector).eq(index-1).focus();
        }
        return;
    }
    //  ↓キー
    if ( e.keyCode == 40  || e.keyCode == 39){
        index   =   $(selector).index(this);
        if (index < $(selector).length - 1 ){
            $(selector).eq(index+1).focus();
        }
        return;
    }
  });

  $("#ok_2_1_2").keypress(function(e){
    if(e.which == 13){
      $("#ok_2_1_2").click();
    }
  });
  $("#call_2_1_2").keypress(function(e){
    if(e.which == 13){
      $("#call_2_1_2").click();
    }
  });
  $("#cancel_2_1_2").keypress(function(e){
    if(e.which == 13){
      $("#cancel_2_1_2").click();
    }
  });
  $("#type_2_1_2").keypress(function(e){
    if(e.which == 13){
      $("#type_2_1_2").click();
    }
  });
<% else %>
<% end %>
